!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("superSlider",[],e):"object"==typeof exports?exports.superSlider=e():t.superSlider=e()}(self,(function(){return(()=>{"use strict";var t={};(t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})})(t);const e=function(){function t(t,e){this.$pointer=$("<div>",{class:"slider__pointer"}),t.append(this.$pointer),this.isSecond=void 0!==e&&e,this.initMouseEvents(),this.initTouchEvents()}return t.prototype.render=function(t){!1!==t.display?(this.$pointer.show(),this.isVertical=t.vertical,void 0!==t.zIndex&&this.$pointer.css("zIndex",t.zIndex),t.vertical?this.$pointer.css({top:t.position+"%",left:""}):this.$pointer.css({left:t.position+"%",top:""})):this.$pointer.hide()},t.prototype.setObserver=function(t){this.observer=t},t.prototype.initMouseEvents=function(){var t,e,i=function(i){var o,n=i.clientX-t,s=i.clientY-e,r=this.calcDistanceInPercent(n,s);null===(o=this.observer)||void 0===o||o.move(r,this.isSecond)}.bind(this),o=function(){var t;$(document).off("mousemove",i),null===(t=this.observer)||void 0===t||t.endMove(this.isSecond)}.bind(this),n=function(n){var s;$(document).on("mousemove",i),$(document).one("mouseup",o),t=n.offsetX,e=n.offsetY,null===(s=this.observer)||void 0===s||s.startMove(this.isSecond)}.bind(this);this.$pointer.on("mousedown",n)},t.prototype.initTouchEvents=function(){var t=function(t){var e,i=t.touches[0].clientX,o=t.touches[0].clientY,n=this.calcDistanceInPercent(i,o);null===(e=this.observer)||void 0===e||e.move(n,this.isSecond),t.preventDefault(),t.stopPropagation()}.bind(this),e=function(){var i;document.removeEventListener("touchmove",t),document.removeEventListener("touchend",e),null===(i=this.observer)||void 0===i||i.endMove(this.isSecond)}.bind(this),i=function(i){var o;document.addEventListener("touchmove",t,{passive:!1}),document.addEventListener("touchend",e),null===(o=this.observer)||void 0===o||o.startMove(this.isSecond),i.preventDefault(),i.stopPropagation()}.bind(this);this.$pointer[0].addEventListener("touchstart",i,{passive:!1})},t.prototype.calcDistanceInPercent=function(t,e){var i=t-this.$pointer[0].getBoundingClientRect().left,o=e-this.$pointer[0].getBoundingClientRect().top,n=i/this.$pointer.parent().width()*100,s=o/this.$pointer.parent().height()*100;return this.isVertical?s:n},t}(),i=function(){function t(t){this.$bar=$("<div>",{class:"slider__bar"}),this.$progressSegment=$("<div>",{class:"slider__progress-segment"}),t.append(this.$bar),this.$bar.append(this.$progressSegment)}return t.prototype.render=function(t){!1!==t.progressbar?(this.$progressSegment.show(),t.vertical?(this.$progressSegment.css({height:t.intervalLength+"%",width:""}),this.$progressSegment.css({top:t.intervalStartPos+"%",left:""})):(this.$progressSegment.css({width:t.intervalLength+"%",height:""}),this.$progressSegment.css({left:t.intervalStartPos+"%",top:""}))):this.$progressSegment.hide()},t}(),o=function(){function t(t){this.$scale=$("<div>",{class:"slider__scale"}),t.append(this.$scale)}return t.prototype.render=function(t){var e=this;if(!1!==t.display){for(this.$scale.show();this.$scale.children().length!==t.labels.length;)if(this.$scale.children().length<t.labels.length){var i=$("<div>",{class:"slider__scale-label"});this.$scale.append(i)}else this.$scale.children().last().remove();t.labels.forEach((function(i,o){var n=$(e.$scale.children()[o]);n.off("click"),n.on("click",(function(){var t;null===(t=e.observer)||void 0===t||t.click(i.pos)})),n.text(i.val),t.vertical?n.css({top:i.pos+"%",left:""}):n.css({left:i.pos+"%",top:""})}))}else this.$scale.hide()},t.prototype.setObserver=function(t){this.observer=t},t}(),n=function(){function t(t){this.$tip=$("<div>",{class:"slider__tip"}),t.append(this.$tip)}return t.prototype.render=function(t){!1!==t.display?(this.$tip.show(),t.vertical?this.$tip.css({top:t.position+"%",left:""}):this.$tip.css({left:t.position+"%",top:""}),this.$tip.text(t.value)):this.$tip.hide()},t}(),s=function(){function t(t){var s=this;this.$container=$("<div>",{class:"slider__container"}),this.$scaleContainer=$("<div>",{class:"slider__scale-container"}),this.$barContainer=$("<div>",{class:"slider__bar-container"}),this.$tipsContainer=$("<div>",{class:"slider__tips-container"}),t.append(this.$container),this.$container.append(this.$tipsContainer).append(this.$barContainer).append(this.$scaleContainer),this.scale=new o(this.$scaleContainer),this.bar=new i(this.$barContainer),this.pointer=new e(this.$barContainer),this.secondPointer=new e(this.$barContainer,!0),this.tip=new n(this.$tipsContainer),this.secondTip=new n(this.$tipsContainer),[this.pointer,this.secondPointer].forEach((function(t){t.setObserver(s.createPointerObserver())})),this.scale.setObserver(this.createScaleObserver())}return t.prototype.render=function(t,e){t.typeVertical?this.$container.addClass("slider__container_vertical"):this.$container.removeClass("slider__container_vertical");var i={progressbar:t.displayProgressBar,vertical:t.typeVertical,intervalStartPos:t.typeRange?t.pointerPosition:0,intervalLength:t.typeRange?t.secondPointerPosition-t.pointerPosition:t.pointerPosition},o={display:t.displayScale,vertical:t.typeVertical,labels:t.scaleLabels},n={display:t.displayTips,vertical:t.typeVertical,position:t.pointerPosition,value:t.tipValue},s={display:!0,vertical:t.typeVertical,position:t.pointerPosition,zIndex:this.secondPointerOnTopLayer?2:3},r={display:t.displayTips&&t.typeRange,vertical:t.typeVertical,position:t.secondPointerPosition,value:t.secondTipValue},a={display:t.typeRange,vertical:t.typeVertical,position:t.secondPointerPosition,zIndex:this.secondPointerOnTopLayer?3:2};void 0!==e&&!1!==e||this.scale.render(o),this.bar.render(i),this.tip.render(n),this.secondTip.render(r),this.pointer.render(s),this.secondPointer.render(a)},t.prototype.setObserver=function(t){this.observer=t},t.prototype.createPointerObserver=function(){var t=this;return{startMove:this.pointerStartMoveEventHandler.bind(this),move:function(e,i){var o;return null===(o=t.observer)||void 0===o?void 0:o.pointerMove(e,i)},endMove:function(e){var i;return null===(i=t.observer)||void 0===i?void 0:i.pointerEndMove(e)}}},t.prototype.createScaleObserver=function(){var t=this;return{click:function(e){var i;return null===(i=t.observer)||void 0===i?void 0:i.clickOnScale(e)}}},t.prototype.pointerStartMoveEventHandler=function(t){var e;this.secondPointerOnTopLayer=t,null===(e=this.observer)||void 0===e||e.pointerStartMove(t)},t}();const r=function(){function t(){this.typeVertical=false,this.typeRange=true,this.displayTips=true,this.displayProgressBar=true,this.displayScale=false,this.minValue=0,this.maxValue=100,this.step=1,this.pointerPosition=20,this.secondPointerPosition=80}return t.prototype.setObserver=function(t){this.observer=t},t.prototype.setData=function(t){this.setTypeVertical(t.typeVertical),this.setTypeRange(t.typeRange),this.setDisplayTips(t.displayTips),this.setDisplayProgressBar(t.displayProgressBar),this.setDisplayScale(t.displayScale),this.setMinValue(t.minValue),this.setMaxValue(t.maxValue),this.setStep(t.step),this.setPointerPosition(t.pointerPosition),this.setSecondPointerPosition(t.secondPointerPosition)},t.prototype.setTypeVertical=function(t){this.typeVertical=t,this.updateEvent()},t.prototype.setTypeRange=function(t){this.typeRange=t,this.secondPointerPosition=this.normalizeSecondPointerPosition(this.secondPointerPosition),this.updateEvent()},t.prototype.setDisplayTips=function(t){this.displayTips=t,this.updateEvent()},t.prototype.setDisplayProgressBar=function(t){this.displayProgressBar=t,this.updateEvent()},t.prototype.setDisplayScale=function(t){this.displayScale=t,this.updateEvent()},t.prototype.setMinValue=function(t){t>=this.maxValue&&(this.maxValue=t+1),this.minValue=t,this.pointerPosition=this.normalizePointerPosition(this.pointerPosition),this.secondPointerPosition=this.normalizeSecondPointerPosition(this.secondPointerPosition),this.updateEvent()},t.prototype.setMaxValue=function(t){t<=this.minValue&&(this.minValue=t-1),this.maxValue=t,this.pointerPosition=this.normalizePointerPosition(this.pointerPosition),this.secondPointerPosition=this.normalizeSecondPointerPosition(this.secondPointerPosition),this.updateEvent()},t.prototype.setStep=function(t){var e=t;e<=0&&(e=1),this.step=e,this.pointerPosition=this.normalizePosition(this.pointerPosition),this.secondPointerPosition=this.normalizePosition(this.secondPointerPosition),this.updateEvent()},t.prototype.setPointerPosition=function(t){this.pointerPosition=this.normalizePointerPosition(t),this.updateEvent({updatedOnlyPointersPositions:!0})},t.prototype.setSecondPointerPosition=function(t){this.secondPointerPosition=this.normalizeSecondPointerPosition(t),this.updateEvent({updatedOnlyPointersPositions:!0})},t.prototype.setPointerPositionInPercent=function(t){this.pointerPosition=this.normalizePointerPosition(this.percentToPos(t)),this.updateEvent({updatedOnlyPointersPositions:!0})},t.prototype.setSecondPointerPositionInPercent=function(t){this.secondPointerPosition=this.normalizeSecondPointerPosition(this.percentToPos(t)),this.updateEvent({updatedOnlyPointersPositions:!0})},t.prototype.getData=function(){return{typeVertical:this.typeVertical,typeRange:this.typeRange,displayTips:this.displayTips,displayProgressBar:this.displayProgressBar,displayScale:this.displayScale,minValue:this.minValue,maxValue:this.maxValue,step:this.step,pointerPosition:this.pointerPosition,secondPointerPosition:this.secondPointerPosition}},t.prototype.getTypeVertical=function(){return this.typeVertical},t.prototype.getTypeRange=function(){return this.typeRange},t.prototype.getDisplayTips=function(){return this.displayTips},t.prototype.getDisplayProgressBar=function(){return this.displayProgressBar},t.prototype.getDisplayScale=function(){return this.displayScale},t.prototype.getMinValue=function(){return this.minValue},t.prototype.getMaxValue=function(){return this.maxValue},t.prototype.getStep=function(){return this.step},t.prototype.getPointerPosition=function(){return this.pointerPosition},t.prototype.getSecondPointerPosition=function(){return this.secondPointerPosition},t.prototype.getStepInPercent=function(){return this.valueToPercent(this.step)},t.prototype.getPointerPositionInPercent=function(){return this.posToPercent(this.pointerPosition)},t.prototype.getSecondPointerPositionInPercent=function(){return this.posToPercent(this.secondPointerPosition)},t.prototype.posToPercent=function(t){return(t-this.minValue)/(this.maxValue-this.minValue)*100},t.prototype.percentToPos=function(t){return this.minValue+(this.maxValue-this.minValue)*(t/100)},t.prototype.valueToPercent=function(t){return t/(this.maxValue-this.minValue)*100},t.prototype.normalizePointerPosition=function(t){var e=this.normalizePosition(t);return this.typeRange&&e>this.secondPointerPosition&&(e=this.secondPointerPosition),e},t.prototype.normalizeSecondPointerPosition=function(t){var e=this.normalizePosition(t);return e<this.pointerPosition&&(e=this.pointerPosition),e},t.prototype.normalizePosition=function(t){var e=Math.round((t-this.minValue)/this.step)*this.step+this.minValue;return e<this.minValue&&(e=this.minValue),e>this.maxValue&&(e=this.maxValue),e},t.prototype.updateEvent=function(t){var e,i=void 0===t?{updatedOnlyPointersPositions:!1}:t;null===(e=this.observer)||void 0===e||e.update(i)},t}();var a=function(){return a=Object.assign||function(t){for(var e,i=1,o=arguments.length;i<o;i++)for(var n in e=arguments[i])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t},a.apply(this,arguments)};const p=function(){function t(t,e,i,o){this.model=t,this.view=e,this.events=o,this.viewProps={},this.updateModel(i),this.updateView(),this.view.setObserver(this.createViewObserver()),this.model.setObserver(this.createModelObserver())}return t.prototype.getUpdateFunction=function(){var t=this;return function(e){t.updateModel(e)}},t.prototype.getSetters=function(){return{typeVertical:this.model.setTypeVertical.bind(this.model),typeRange:this.model.setTypeRange.bind(this.model),displayTips:this.model.setDisplayTips.bind(this.model),displayProgressBar:this.model.setDisplayProgressBar.bind(this.model),displayScale:this.model.setDisplayScale.bind(this.model),minValue:this.model.setMinValue.bind(this.model),maxValue:this.model.setMaxValue.bind(this.model),step:this.model.setStep.bind(this.model),pointerPosition:this.model.setPointerPosition.bind(this.model),secondPointerPosition:this.model.setSecondPointerPosition.bind(this.model)}},t.prototype.getGetters=function(){return{typeVertical:this.model.getTypeVertical.bind(this.model),typeRange:this.model.getTypeRange.bind(this.model),displayTips:this.model.getDisplayTips.bind(this.model),displayProgressBar:this.model.getDisplayProgressBar.bind(this.model),displayScale:this.model.getDisplayScale.bind(this.model),minValue:this.model.getMinValue.bind(this.model),maxValue:this.model.getMaxValue.bind(this.model),step:this.model.getStep.bind(this.model),pointerPosition:this.model.getPointerPosition.bind(this.model),secondPointerPosition:this.model.getSecondPointerPosition.bind(this.model)}},t.prototype.createViewObserver=function(){return{pointerMove:this.pointerMoveEventHandler.bind(this),pointerStartMove:this.pointerStartMoveEventHandler.bind(this),pointerEndMove:this.pointerEndMoveEventHandler.bind(this),clickOnScale:this.scaleClickEventHandler.bind(this)}},t.prototype.createModelObserver=function(){return{update:this.modelUpdateEventHandler.bind(this)}},t.prototype.modelUpdateEventHandler=function(t){this.updateView(t.updatedOnlyPointersPositions),this.events.update()},t.prototype.pointerStartMoveEventHandler=function(){this.events.start()},t.prototype.pointerEndMoveEventHandler=function(){this.events.stop()},t.prototype.pointerMoveEventHandler=function(t,e){var i=this.model.getStepInPercent(),o=this.model.getPointerPositionInPercent(),n=this.model.getSecondPointerPositionInPercent();if(!(Math.abs(t)<.6*i||Math.abs(t)<.1)){if(e){var s=n+t;this.model.setSecondPointerPositionInPercent(s)}else s=o+t,this.model.setPointerPositionInPercent(s);this.events.slide()}},t.prototype.scaleClickEventHandler=function(t){if(this.model.getTypeRange()){var e=this.model.getPointerPositionInPercent(),i=this.model.getSecondPointerPositionInPercent();t<e?this.model.setPointerPositionInPercent(t):t>i?this.model.setSecondPointerPositionInPercent(t):t-e<i-t?this.model.setPointerPositionInPercent(t):this.model.setSecondPointerPositionInPercent(t)}else this.model.setPointerPositionInPercent(t);this.events.slide()},t.prototype.updateView=function(t){this.viewProps.pointerPosition=this.model.getPointerPositionInPercent(),this.viewProps.secondPointerPosition=this.model.getSecondPointerPositionInPercent(),this.viewProps.tipValue=Math.round(this.model.getPointerPosition()).toString(),this.viewProps.secondTipValue=Math.round(this.model.getSecondPointerPosition()).toString(),void 0!==t&&!1!==t||(this.viewProps.typeVertical=this.model.getTypeVertical(),this.viewProps.typeRange=this.model.getTypeRange(),this.viewProps.displayTips=this.model.getDisplayTips(),this.viewProps.displayProgressBar=this.model.getDisplayProgressBar(),this.viewProps.displayScale=this.model.getDisplayScale(),this.viewProps.scaleLabels=this.createScaleLabels()),this.view.render(this.viewProps,t)},t.prototype.createScaleLabels=function(){for(var t=[],e=this.model.getStepInPercent(),i=this.model.getMaxValue(),o=this.model.getMinValue(),n=0;n<=100;n+=e){var s=o+n/100*(i-o);t.push({val:Math.round(s).toString(),pos:n})}var r=t[t.length-1].pos;return Math.abs(r-100)>=.5&&t.push({val:i.toString(),pos:100}),t},t.prototype.updateModel=function(t){var e=a(a({},this.model.getData()),t);this.model.setData(e)},t}();return $.fn.superSlider=function(t,e){var i=$(this);if("object"==typeof t||void 0===t){if(void 0!==i.data("updateSettings"))return i.data("updateSettings")(t),i;var o=new s(i),n=new r,a=new p(n,o,t,{update:function(){i.trigger("sliderupdate")},start:function(){i.trigger("slidestart")},slide:function(){i.trigger("slide")},stop:function(){i.trigger("slidestop")}});i.data("updateSettings",a.getUpdateFunction()),i.data("setters",a.getSetters()),i.data("getters",a.getGetters())}return"string"==typeof t?void 0!==e?i.data("setters")[t](e):i.data("getters")[t]():i},t})()}));